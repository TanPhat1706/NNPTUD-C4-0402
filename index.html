<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-blue: #0d6efd;
            --primary-blue-hover: #0b5ed7;
            --light-blue-bg: #e7f1ff;
        }
        body {
            background-color: #f8f9fa;
        }
        .text-primary-blue {
            color: var(--primary-blue);
        }
        .bg-primary-blue {
            background-color: var(--primary-blue);
        }
        .container {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        h1 {
            color: var(--primary-blue);
            font-weight: 700;
        }
        .btn-primary {
            background-color: var(--primary-blue);
            border-color: var(--primary-blue);
        }
        .btn-primary:hover {
            background-color: var(--primary-blue-hover);
            border-color: var(--primary-blue-hover);
        }
        .table-primary-head th {
            background-color: var(--primary-blue);
            color: white;
            border-bottom: none;
        }
        .table-hover tbody tr:hover {
            background-color: var(--light-blue-bg);
        }
        .page-item.active .page-link {
            background-color: var(--primary-blue);
            border-color: var(--primary-blue);
        }
        .page-link {
            color: var(--primary-blue);
        }
        .page-link:hover {
            color: var(--primary-blue-hover);
            background-color: var(--light-blue-bg);
        }
        .cursor-pointer {
            cursor: pointer;
        }
        .sort-icon::after {
            content: ' \2195'; /* Up down arrow */
            font-size: 0.8em;
            opacity: 0.5;
        }
        .sort-asc::after {
            content: ' \2191'; /* Up arrow */
            opacity: 1;
        }
        .sort-desc::after {
            content: ' \2193'; /* Down arrow */
            opacity: 1;
        }
        .product-img-thumb {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 4px;
            border: 1px solid #dee2e6;
        }
        /* Modal Header Blue */
        .modal-header {
            background-color: var(--primary-blue);
            color: white;
        }
        .modal-header .btn-close {
            filter: invert(1) grayscale(100%) brightness(200%);
        }
        /* Tooltip styling is handled by Bootstrap functionality or native title attribute, 
           but requirement says "Description will be displayed when hovering over the corresponding line".
           We can use the title attribute on the tr or a custom tooltip. 
           Bootstrap Tooltip is nicer. I'll add data-bs-toggle="tooltip" to the row.
        */
    </style>
</head>
<body>
    <div class="container mt-4">
        <h1 class="mb-4">Product Dashboard</h1>

        <!-- Controls -->
        <div class="row mb-3 g-2 align-items-center">
            <div class="col-md-4">
                <input type="text" id="searchInput" class="form-control" placeholder="Tìm kiếm theo Title...">
            </div>
            <div class="col-md-8 text-md-end">
                <button class="btn btn-success me-2" id="btnCreateModal" data-bs-toggle="modal" data-bs-target="#createModal">
                    <i class="bi bi-plus-lg"></i> Tạo mới
                </button>
                <button class="btn btn-primary" id="btnExport">
                    Export CSV
                </button>
            </div>
        </div>

        <!-- Pagination Controls (Top) & Rows Per Page -->
        <div class="d-flex justify-content-between align-items-center mb-2">
            <div class="d-flex align-items-center">
                <label for="rowsPerPage" class="me-2">Hiển thị:</label>
                <select id="rowsPerPage" class="form-select form-select-sm" style="width: auto;">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="20">20</option>
                </select>
            </div>
            <span id="showingInfo" class="text-muted small"></span>
        </div>

        <!-- Table -->
        <div class="table-responsive">
            <table class="table table-hover table-bordered align-middle">
                <thead class="table-primary-head">
                    <tr>
                        <th>ID</th>
                        <th class="cursor-pointer sortable" data-sort="title">Title <span class="sort-icon"></span></th>
                        <th class="cursor-pointer sortable" data-sort="price">Price <span class="sort-icon"></span></th>
                        <th>Category</th>
                        <th>Images</th>
                    </tr>
                </thead>
                <tbody id="productTableBody">
                    <!-- Data will be populated here -->
                </tbody>
            </table>
        </div>

        <!-- Pagination (Bottom) -->
        <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center" id="pagination">
                <!-- Pagination items will be populated here -->
            </ul>
        </nav>
    </div>

    <!-- View/Edit Modal -->
    <div class="modal fade" id="productModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="productModalLabel">Chi tiết sản phẩm</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editForm">
                        <div class="mb-3">
                            <label for="editId" class="form-label">ID</label>
                            <input type="text" class="form-control" id="editId" disabled>
                        </div>
                        <div class="mb-3">
                            <label for="editTitle" class="form-label">Title</label>
                            <input type="text" class="form-control" id="editTitle" required>
                        </div>
                        <div class="mb-3">
                            <label for="editPrice" class="form-label">Price</label>
                            <input type="number" class="form-control" id="editPrice" required>
                        </div>
                        <div class="mb-3">
                            <label for="editDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="editDescription" rows="3" required></textarea>
                        </div>
                        <!-- We won't implement full category/image editing complexity unless asked, just basics or read-only for complexity reduction, 
                             but user said "edit with API", so basic fields are best. API supports title, price, description. -->
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                    <button type="button" class="btn btn-primary" id="btnUpdate">Cập nhật</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Modal -->
    <div class="modal fade" id="createModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Tạo sản phẩm mới</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="createForm">
                        <div class="mb-3">
                            <label for="createTitle" class="form-label">Title</label>
                            <input type="text" class="form-control" id="createTitle" required>
                        </div>
                        <div class="mb-3">
                            <label for="createPrice" class="form-label">Price</label>
                            <input type="number" class="form-control" id="createPrice" required>
                        </div>
                        <div class="mb-3">
                            <label for="createDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="createDescription" rows="3" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="createCategoryId" class="form-label">Category ID</label>
                            <input type="number" class="form-control" id="createCategoryId" value="1" required>
                            <div class="form-text">Nhập ID danh mục (ví dụ: 1)</div>
                        </div>
                        <div class="mb-3">
                            <label for="createImageUrl" class="form-label">Image URL</label>
                            <input type="url" class="form-control" id="createImageUrl" value="https://placehold.co/600x400" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                    <button type="button" class="btn btn-success" id="btnSaveNew">Tạo</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="main.js"></script>
</body>
</html>